window.addEventListener("load",function(){var e=document.querySelector("#idx_dashboard_widget #timeframeswitch"),t=document.querySelector("#idx_dashboard_widget .leads"),a=document.querySelector("#idx_dashboard_widget .listings"),i=document.querySelector(".idx-loader"),o=document.querySelector("#idx_dashboard_widget .leads-overview"),n=document.querySelector("#idx_dashboard_widget .listings-overview");function l(){return!0===e.checked?"month":"day"}function r(){i.style.display="block",document.querySelector("#idx_dashboard_widget .week-day-label").innerHTML="Day",n.style.display="none",o.style.display="block",o.style.opacity=0,jQuery.post(ajaxurl,{action:"idx_dashboard_leads",timeframe:l()}).done(function(e){if("No Leads Returned"===e)return i.style.display="none",o.style.opacity=1,o.innerHTML=e;var t=google.visualization.arrayToDataTable(JSON.parse(e));return new google.visualization.AreaChart(document.querySelector(".leads-overview")).draw(t,{title:"Lead Statistics",hAxis:{title:"Date",titleTextStyle:{color:"#333"}},vAxis:{minValue:0,maxValue:4,format:"#"},legend:{position:"in"},axisTitlesPosition:"out",theme:"maximized",animation:{startup:!0,duration:500}}),o.style.display="block",o.style.opacity=1,i.style.display="none"})}function d(){i.style.display="block",document.querySelector("#idx_dashboard_widget .week-day-label").innerHTML="Week",o.style.display="none",n.style.display="block",n.style.opacity=0,jQuery.post(ajaxurl,{action:"idx_dashboard_listings",timeframe:l()}).done(function(e){if("No Listings Returned"===e)return i.style.display="none",n.style.opacity=1,document.querySelector(".listings-overview").innerHTML=e;var t=google.visualization.arrayToDataTable(JSON.parse(e));return new google.visualization.PieChart(document.querySelector(".listings-overview")).draw(t,{title:"Listing Statistics",pieHole:.4,animation:{startup:!0,duration:500}}),n.style.display="block",n.style.opacity=1,i.style.display="none"})}function s(){google.charts.setOnLoadCallback(r)}function c(){google.charts.setOnLoadCallback(d)}function u(e){e.preventDefault(),a.classList.remove("button-primary"),a.disabled=!0,t.disabled=!1,t.classList.add("button-primary"),c()}function y(e){e.preventDefault(),t.classList.remove("button-primary"),t.disabled=!0,a.disabled=!1,a.classList.add("button-primary"),s()}function p(){(!0===t.disabled?s:c)()}jQuery.ajax({url:ajaxurl,data:{action:"side_overview_data"}}).done(function(e){var t=JSON.parse(e).data;document.querySelector(".new-leads ul").innerHTML=t.leads,document.querySelector(".popular-listings ul").innerHTML=t.listings}),google.charts.load("current",{packages:["corechart"]}),e.addEventListener("change",p),a.addEventListener("click",u),t.addEventListener("click",y),s()});